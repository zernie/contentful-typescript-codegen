{"version":3,"file":"contentful-typescript-codegen.js","sources":["../src/renderers/contentful/renderContentfulImports.ts","../src/renderers/typescript/renderInterface.ts","../src/renderers/typescript/renderInterfaceProperty.ts","../src/renderers/contentful/renderField.ts","../src/renderers/contentful/renderContentTypeId.ts","../src/renderers/typescript/renderUnion.ts","../src/renderers/contentful/fields/renderSymbol.ts","../src/renderers/contentful/fields/renderLink.ts","../src/renderers/typescript/renderArrayOf.ts","../src/renderers/contentful/fields/renderArray.ts","../src/renderers/contentful/fields/renderBoolean.ts","../src/renderers/contentful/fields/renderLocation.ts","../src/renderers/contentful/fields/renderNumber.ts","../src/renderers/contentful/fields/renderObject.ts","../src/renderers/contentful/fields/renderRichText.ts","../src/renderers/contentful/renderContentType.ts","../src/renderers/contentful/renderAllLocales.ts","../src/renderers/contentful/renderDefaultLocale.ts","../src/renderers/contentful/renderNamespace.ts","../src/renderers/contentful/renderLocalizedTypes.ts","../src/renderers/render.ts","../src/renderers/contentful-fields-only/fields/renderLink.ts","../src/renderers/contentful-fields-only/fields/renderArray.ts","../src/renderers/contentful-fields-only/fields/renderRichText.ts","../src/renderers/contentful-fields-only/renderContentType.ts","../src/renderers/renderFieldsOnly.ts","../src/contentful-typescript-codegen.ts"],"sourcesContent":["export default function renderContentfulImports(localization: boolean = false): string {\r\n  if (localization) {\r\n    return `\r\n    // THIS FILE IS AUTOMATICALLY GENERATED. DO NOT MODIFY IT.\r\n\r\n    import { Entry } from 'contentful'\r\n    import { Document } from '@contentful/rich-text-types'\r\n  `\r\n  }\r\n\r\n  return `\r\n    // THIS FILE IS AUTOMATICALLY GENERATED. DO NOT MODIFY IT.\r\n\r\n    import { Asset, Entry } from 'contentful'\r\n    import { Document } from '@contentful/rich-text-types'\r\n  `\r\n}\r\n","export default function renderInterface({\r\n  name,\r\n  extension,\r\n  fields,\r\n  description,\r\n}: {\r\n  name: string\r\n  extension?: string\r\n  fields: string\r\n  description?: string\r\n}) {\r\n  return `\r\n    ${description ? `/** ${description} */` : \"\"}\r\n    export interface ${name} ${extension ? `extends ${extension}` : \"\"} {\r\n      ${fields}\r\n    }\r\n  `\r\n}\r\n","export default function renderInterfaceProperty(\r\n  name: string,\r\n  type: string,\r\n  required: boolean,\r\n  localization: boolean,\r\n  description?: string,\r\n): string {\r\n  return [\r\n    descriptionComment(description),\r\n    name,\r\n    required ? \"\" : \"?\",\r\n    \": \",\r\n    localization ? `LocalizedField<${type}>` : type,\r\n    required ? \"\" : \" | undefined\",\r\n    \";\",\r\n  ].join(\"\")\r\n}\r\n\r\nfunction descriptionComment(description: string | undefined) {\r\n  if (description) {\r\n    return `/** ${description} */\\n`\r\n  } else {\r\n    return \"\"\r\n  }\r\n}\r\n","import { Field } from \"contentful\"\r\nimport renderInterfaceProperty from \"../typescript/renderInterfaceProperty\"\r\n\r\nexport default function renderField(\r\n  field: Field,\r\n  type: string,\r\n  localization: boolean = false,\r\n): string {\r\n  return renderInterfaceProperty(field.id, type, field.required, localization, field.name)\r\n}\r\n","import { upperFirst, camelCase } from \"lodash\"\r\n\r\nexport default function renderContentTypeId(contentTypeId: string): string {\r\n  return \"I\" + upperFirst(camelCase(contentTypeId))\r\n}\r\n","export default function renderUnion(name: string, values: string[]): string {\r\n  return `\r\n    export type ${name} = ${renderUnionValues(values)};\r\n  `\r\n}\r\n\r\nexport function renderUnionValues(values: string[]): string {\r\n  if (values.length === 0) {\r\n    return \"never\"\r\n  } else {\r\n    return values.join(\" | \")\r\n  }\r\n}\r\n","import { Field } from \"contentful\"\r\n\r\nimport { renderUnionValues } from \"../../typescript/renderUnion\"\r\n\r\nexport default function renderSymbol(field: Field) {\r\n  const inValidation = field.validations.find(validation => !!validation.in)\r\n\r\n  if (inValidation) {\r\n    return renderUnionValues(inValidation.in!.map(value => `'${value}'`))\r\n  } else {\r\n    return \"string\"\r\n  }\r\n}\r\n","import { Field } from \"contentful\"\r\nimport renderContentTypeId from \"../renderContentTypeId\"\r\nimport { renderUnionValues } from \"../../typescript/renderUnion\"\r\n\r\nexport default function renderLink(field: Field): string {\r\n  if (field.linkType === \"Asset\") {\r\n    return \"Asset\"\r\n  }\r\n\r\n  if (field.linkType === \"Entry\") {\r\n    const contentTypeValidation = field.validations.find(validation => !!validation.linkContentType)\r\n\r\n    if (contentTypeValidation) {\r\n      return renderUnionValues(contentTypeValidation.linkContentType!.map(renderContentTypeId))\r\n    } else {\r\n      return \"Entry<{ [fieldId: string]: unknown }>\"\r\n    }\r\n  }\r\n\r\n  return \"unknown\"\r\n}\r\n","export default function renderArrayOf(source: string) {\r\n  return `(${source})[]`\r\n}\r\n","import { Field } from \"contentful\"\r\nimport renderSymbol from \"./renderSymbol\"\r\nimport renderLink from \"./renderLink\"\r\nimport renderArrayOf from \"../../typescript/renderArrayOf\"\r\n\r\nexport default function renderArray(field: Field): string {\r\n  if (!field.items) {\r\n    throw new Error(`Cannot render non-array field ${field.id} as an array`)\r\n  }\r\n\r\n  const fieldWithValidations: Field = {\r\n    ...field,\r\n    linkType: field.items.linkType,\r\n    validations: field.items.validations || [],\r\n  }\r\n\r\n  switch (field.items.type) {\r\n    case \"Symbol\": {\r\n      return renderArrayOf(renderSymbol(fieldWithValidations))\r\n    }\r\n\r\n    case \"Link\": {\r\n      return renderArrayOf(renderLink(fieldWithValidations))\r\n    }\r\n  }\r\n\r\n  return renderArrayOf(\"unknown\")\r\n}\r\n","import { Field } from \"contentful\"\r\n\r\nexport default function renderBoolean(field: Field) {\r\n  return \"boolean\"\r\n}\r\n","import { Field } from \"contentful\"\r\n\r\nexport default function renderLocation(field: Field): string {\r\n  return \"{ lat: number, lon: number }\"\r\n}\r\n","import { Field } from \"contentful\"\r\n\r\nexport default function renderNumber(field: Field): string {\r\n  return \"number\"\r\n}\r\n","import { Field } from \"contentful\"\r\n\r\nexport default function renderObject(field: Field): string {\r\n  return \"Record<string, any>\"\r\n}\r\n","import { Field } from \"contentful\"\r\n\r\nexport default function renderRichText(field: Field): string {\r\n  return \"Document\"\r\n}\r\n","import { ContentType, Field, FieldType, Sys } from \"contentful\"\r\n\r\nimport renderInterface from \"../typescript/renderInterface\"\r\nimport renderField from \"./renderField\"\r\nimport renderContentTypeId from \"./renderContentTypeId\"\r\n\r\nimport renderArray from \"./fields/renderArray\"\r\nimport renderBoolean from \"./fields/renderBoolean\"\r\nimport renderLink from \"./fields/renderLink\"\r\nimport renderLocation from \"./fields/renderLocation\"\r\nimport renderNumber from \"./fields/renderNumber\"\r\nimport renderObject from \"./fields/renderObject\"\r\nimport renderRichText from \"./fields/renderRichText\"\r\nimport renderSymbol from \"./fields/renderSymbol\"\r\n\r\nexport default function renderContentType(contentType: ContentType, localization: boolean): string {\r\n  const name = renderContentTypeId(contentType.sys.id)\r\n  const fields = renderContentTypeFields(contentType.fields, localization)\r\n  const sys = renderSys(contentType.sys)\r\n\r\n  return `\r\n    ${renderInterface({ name: `${name}Fields`, fields })}\r\n\r\n    ${descriptionComment(contentType.description)}\r\n    ${renderInterface({ name, extension: `Entry<${name}Fields>`, fields: sys })}\r\n  `\r\n}\r\n\r\nfunction descriptionComment(description: string | undefined) {\r\n  if (description) {\r\n    return `/** ${description} */`\r\n  }\r\n\r\n  return \"\"\r\n}\r\n\r\nfunction renderContentTypeFields(fields: Field[], localization: boolean): string {\r\n  return fields\r\n    .filter(field => !field.omitted)\r\n    .map<string>(field => {\r\n      const functionMap: Record<FieldType, (field: Field) => string> = {\r\n        Array: renderArray,\r\n        Boolean: renderBoolean,\r\n        Date: renderSymbol,\r\n        Integer: renderNumber,\r\n        Link: renderLink,\r\n        Location: renderLocation,\r\n        Number: renderNumber,\r\n        Object: renderObject,\r\n        RichText: renderRichText,\r\n        Symbol: renderSymbol,\r\n        Text: renderSymbol,\r\n      }\r\n\r\n      return renderField(field, functionMap[field.type](field), localization)\r\n    })\r\n    .join(\"\\n\\n\")\r\n}\r\n\r\nfunction renderSys(sys: Sys) {\r\n  return `\r\n    sys: {\r\n      id: string;\r\n      type: string;\r\n      createdAt: string;\r\n      updatedAt: string;\r\n      locale: string;\r\n      contentType: {\r\n        sys: {\r\n          id: '${sys.id}';\r\n          linkType: 'ContentType';\r\n          type: 'Link';\r\n        }\r\n      }\r\n    }\r\n  `\r\n}\r\n","import renderUnion from \"../typescript/renderUnion\"\r\nimport { Locale } from \"contentful\"\r\n\r\nexport default function renderAllLocales(locales: Locale[]): string {\r\n  return renderUnion(\"LOCALE_CODE\", locales.map(locale => `'${locale.code}'`))\r\n}\r\n","import { Locale } from \"contentful\"\r\n\r\nexport default function renderDefaultLocale(locales: Locale[]): string {\r\n  const defaultLocale = locales.find(locale => locale.default)\r\n\r\n  if (!defaultLocale) {\r\n    throw new Error(\"Could not find a default locale in Contentful.\")\r\n  }\r\n\r\n  return `export type CONTENTFUL_DEFAULT_LOCALE_CODE = '${defaultLocale.code}';`\r\n}\r\n","export default function renderNamespace(source: string, namespace: string | undefined) {\r\n  if (!namespace) return source\r\n\r\n  return `\r\n    declare namespace ${namespace} {\r\n    ${source}\r\n    }\r\n\r\n    export as namespace ${namespace}\r\n    export=${namespace}\r\n  `\r\n}\r\n","/** renders helper types for --localization flag */\r\nexport default function renderLocalizedTypes(localization: boolean) {\r\n  if (!localization) return null\r\n\r\n  return `\r\n    export type LocalizedField<T> = Partial<Record<LOCALE_CODE, T>>\r\n  \r\n    // We have to use our own localized version of Asset because of a bug in contentful https://github.com/contentful/contentful.js/issues/208\r\n    export interface Asset {\r\n      sys: Sys\r\n      fields: {\r\n        title: string\r\n        description: string\r\n        file: {\r\n          url: string\r\n          details: {\r\n            size: number\r\n            image?: {\r\n              width: number\r\n              height: number\r\n            }\r\n          }\r\n          fileName: string\r\n          contentType: string\r\n        }\r\n      }\r\n      toPlainObject(): object\r\n    }\r\n  `\r\n}\r\n","import { ContentType, Locale } from \"contentful\"\r\n\r\nimport { format, resolveConfig } from \"prettier\"\r\n\r\nimport renderContentfulImports from \"./contentful/renderContentfulImports\"\r\nimport renderContentType from \"./contentful/renderContentType\"\r\nimport renderUnion from \"./typescript/renderUnion\"\r\nimport renderAllLocales from \"./contentful/renderAllLocales\"\r\nimport renderDefaultLocale from \"./contentful/renderDefaultLocale\"\r\nimport renderNamespace from \"./contentful/renderNamespace\"\r\nimport renderLocalizedTypes from \"./contentful/renderLocalizedTypes\"\r\n\r\ninterface Options {\r\n  namespace?: string\r\n  localization?: boolean\r\n}\r\n\r\nexport default async function render(\r\n  contentTypes: ContentType[],\r\n  locales: Locale[],\r\n  { namespace, localization = false }: Options = {},\r\n) {\r\n  const sortedContentTypes = contentTypes.sort((a, b) => a.sys.id.localeCompare(b.sys.id))\r\n  const sortedLocales = locales.sort((a, b) => a.code.localeCompare(b.code))\r\n\r\n  const typingsSource = [\r\n    renderAllContentTypes(sortedContentTypes, localization),\r\n    renderAllContentTypeIds(sortedContentTypes),\r\n    renderAllLocales(sortedLocales),\r\n    renderDefaultLocale(sortedLocales),\r\n    renderLocalizedTypes(localization),\r\n  ].join(\"\\n\\n\")\r\n\r\n  const source = [renderContentfulImports(), renderNamespace(typingsSource, namespace)].join(\"\\n\\n\")\r\n\r\n  const prettierConfig = await resolveConfig(process.cwd())\r\n  return format(source, { ...prettierConfig, parser: \"typescript\" })\r\n}\r\n\r\nfunction renderAllContentTypes(contentTypes: ContentType[], localization: boolean): string {\r\n  return contentTypes.map(contentType => renderContentType(contentType, localization)).join(\"\\n\\n\")\r\n}\r\n\r\nfunction renderAllContentTypeIds(contentTypes: ContentType[]): string {\r\n  return renderUnion(\"CONTENT_TYPE\", contentTypes.map(contentType => `'${contentType.sys.id}'`))\r\n}\r\n","import { Field } from \"contentful\"\r\nimport renderContentTypeId from \"../../contentful/renderContentTypeId\"\r\nimport { renderUnionValues } from \"../../typescript/renderUnion\"\r\n\r\nexport default function renderLink(field: Field): string {\r\n  if (field.linkType === \"Asset\") {\r\n    return \"any\"\r\n  }\r\n\r\n  if (field.linkType === \"Entry\") {\r\n    const contentTypeValidation = field.validations.find(validation => !!validation.linkContentType)\r\n\r\n    if (contentTypeValidation) {\r\n      return renderUnionValues(contentTypeValidation.linkContentType!.map(renderContentTypeId))\r\n    } else {\r\n      return \"unknown\"\r\n    }\r\n  }\r\n\r\n  return \"unknown\"\r\n}\r\n","import { Field } from \"contentful\"\r\nimport renderSymbol from \"../../contentful/fields/renderSymbol\"\r\nimport renderLink from \"../../contentful-fields-only/fields/renderLink\"\r\nimport renderArrayOf from \"../../typescript/renderArrayOf\"\r\n\r\nexport default function renderArray(field: Field): string {\r\n  if (!field.items) {\r\n    throw new Error(`Cannot render non-array field ${field.id} as an array`)\r\n  }\r\n\r\n  const fieldWithValidations: Field = {\r\n    ...field,\r\n    linkType: field.items.linkType,\r\n    validations: field.items.validations || [],\r\n  }\r\n\r\n  switch (field.items.type) {\r\n    case \"Symbol\": {\r\n      return renderArrayOf(renderSymbol(fieldWithValidations))\r\n    }\r\n\r\n    case \"Link\": {\r\n      return renderArrayOf(renderLink(fieldWithValidations))\r\n    }\r\n  }\r\n\r\n  return renderArrayOf(\"unknown\")\r\n}\r\n","import { Field } from \"contentful\"\r\n\r\nexport default function renderRichText(field: Field): string {\r\n  return \"any\"\r\n}\r\n","import { ContentType, Field, FieldType } from \"contentful\"\r\n\r\nimport renderInterface from \"../typescript/renderInterface\"\r\nimport renderField from \"../contentful/renderField\"\r\nimport renderContentTypeId from \"../contentful/renderContentTypeId\"\r\n\r\nimport renderArray from \"../contentful-fields-only/fields/renderArray\"\r\nimport renderLink from \"../contentful-fields-only/fields/renderLink\"\r\nimport renderRichText from \"../contentful-fields-only/fields/renderRichText\"\r\n\r\nimport renderBoolean from \"../contentful/fields/renderBoolean\"\r\nimport renderLocation from \"../contentful/fields/renderLocation\"\r\nimport renderNumber from \"../contentful/fields/renderNumber\"\r\nimport renderObject from \"../contentful/fields/renderObject\"\r\nimport renderSymbol from \"../contentful/fields/renderSymbol\"\r\n\r\nexport default function renderContentType(contentType: ContentType): string {\r\n  const name = renderContentTypeId(contentType.sys.id)\r\n  const fields = renderContentTypeFields(contentType.fields)\r\n\r\n  return renderInterface({\r\n    name,\r\n    fields: `\r\n      fields: { ${fields} };\r\n      [otherKeys: string]: any;\r\n    `,\r\n  })\r\n}\r\n\r\nfunction renderContentTypeFields(fields: Field[]): string {\r\n  return fields\r\n    .filter(field => !field.omitted)\r\n    .map<string>(field => {\r\n      const functionMap: Record<FieldType, (field: Field) => string> = {\r\n        Array: renderArray,\r\n        Boolean: renderBoolean,\r\n        Date: renderSymbol,\r\n        Integer: renderNumber,\r\n        Link: renderLink,\r\n        Location: renderLocation,\r\n        Number: renderNumber,\r\n        Object: renderObject,\r\n        RichText: renderRichText,\r\n        Symbol: renderSymbol,\r\n        Text: renderSymbol,\r\n      }\r\n\r\n      return renderField(field, functionMap[field.type](field))\r\n    })\r\n    .join(\"\\n\\n\")\r\n}\r\n","import { ContentType } from \"contentful\"\r\n\r\nimport { format } from \"prettier\"\r\n\r\nimport renderContentType from \"./contentful-fields-only/renderContentType\"\r\nimport renderNamespace from \"./contentful/renderNamespace\"\r\n\r\ninterface Options {\r\n  namespace?: string\r\n}\r\n\r\nexport default async function renderFieldsOnly(\r\n  contentTypes: ContentType[],\r\n  { namespace }: Options = {},\r\n) {\r\n  const sortedContentTypes = contentTypes.sort((a, b) => a.sys.id.localeCompare(b.sys.id))\r\n\r\n  const typingsSource = renderAllContentTypes(sortedContentTypes)\r\n  const source = [renderNamespace(typingsSource, namespace)].join(\"\\n\\n\")\r\n\r\n  return format(source, { parser: \"typescript\" })\r\n}\r\n\r\nfunction renderAllContentTypes(contentTypes: ContentType[]): string {\r\n  return contentTypes.map(contentType => renderContentType(contentType)).join(\"\\n\\n\")\r\n}\r\n","import render from \"./renderers/render\"\r\nimport renderFieldsOnly from \"./renderers/renderFieldsOnly\"\r\nimport path from \"path\"\r\nimport { outputFileSync } from \"fs-extra\"\r\n\r\nconst meow = require(\"meow\")\r\n\r\nconst cli = meow(\r\n  `\r\n  Usage\r\n    $ contentful-typescript-codegen --output <file> <options>\r\n\r\n  Options\r\n    --output,      -o  Where to write to\r\n    --poll,        -p  Continuously refresh types\r\n    --interval N,  -i  The interval in seconds at which to poll (defaults to 15)\r\n    --namespace N, -n  Wrap types in namespace N (disabled by default)\r\n    --fields-only      Output a tree that _only_ ensures fields are valid\r\n                       and present, and does not provide types for Sys,\r\n                       Assets, or Rich Text. This is useful for ensuring raw\r\n                       Contentful responses will be compatible with your code.\r\n    --localization -l  Output fields with localized values\r\n\r\n  Examples\r\n    $ contentful-typescript-codegen -o src/@types/generated/contentful.d.ts\r\n`,\r\n  {\r\n    flags: {\r\n      output: {\r\n        type: \"string\",\r\n        alias: \"o\",\r\n        required: true,\r\n      },\r\n      fieldsOnly: {\r\n        type: \"boolean\",\r\n        required: false,\r\n      },\r\n      poll: {\r\n        type: \"boolean\",\r\n        alias: \"p\",\r\n        required: false,\r\n      },\r\n      interval: {\r\n        type: \"string\",\r\n        alias: \"i\",\r\n        required: false,\r\n      },\r\n      localization: {\r\n        type: \"boolean\",\r\n        alias: \"l\",\r\n        required: false,\r\n      },\r\n      namespace: {\r\n        type: \"string\",\r\n        alias: \"n\",\r\n        required: false,\r\n      },\r\n    },\r\n  },\r\n)\r\n\r\nasync function runCodegen(outputFile: string) {\r\n  const getEnvironmentPath = path.resolve(process.cwd(), \"./getContentfulEnvironment.js\")\r\n  const getEnvironment = require(getEnvironmentPath)\r\n  const environment = await getEnvironment()\r\n  const contentTypes = await environment.getContentTypes({ limit: 1000 })\r\n  const locales = await environment.getLocales()\r\n  const outputPath = path.resolve(process.cwd(), outputFile)\r\n\r\n  let output\r\n  if (cli.flags.fieldsOnly) {\r\n    output = await renderFieldsOnly(contentTypes.items, { namespace: cli.flags.namespace })\r\n  } else {\r\n    output = await render(contentTypes.items, locales.items, {\r\n      localization: cli.flags.localization,\r\n      namespace: cli.flags.namespace\r\n    })\r\n  }\r\n\r\n  outputFileSync(outputPath, output)\r\n}\r\n\r\nrunCodegen(cli.flags.output).catch(error => {\r\n  console.error(error)\r\n  process.exit(1)\r\n})\r\n\r\nif (cli.flags.poll) {\r\n  const intervalInSeconds = parseInt(cli.flags.interval, 10)\r\n\r\n  if (!isNaN(intervalInSeconds) && intervalInSeconds > 0) {\r\n    setInterval(() => runCodegen(cli.flags.output), intervalInSeconds * 1000)\r\n  } else {\r\n    throw new Error(`Expected a positive numeric interval, but got ${cli.flags.interval}`)\r\n  }\r\n}\r\n"],"names":["upperFirst","camelCase","descriptionComment","resolveConfig","format","renderLink","renderArray","renderRichText","renderContentType","renderContentTypeFields","renderAllContentTypes","outputFileSync"],"mappings":"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"}